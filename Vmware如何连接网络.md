### Vmware虚拟机Ubuntu系统如何连接网络

**版本**

**Vmware:15.0.0 build-10134415**

**Ubuntu:16.04 LTS**

> 由于不同的软件版本的问题，具体问题具体分析，但大致的思路都是如此！

#### 前言

最近想用Linux对开发板进行数据库的安装以及使用，在用Vmware的时候，想在线安装软件，下载git源码包，或者要用浏览器浏览网页，却发现虚拟机的始终连不上网络，为了解决这个问题，特意查询了资料，找到了解决方法。

#### 方法

虚拟机联网方式通常有2种，***NAT***、***桥接***

NAT:设置方便，只要PC能上网，虚拟机内的系统也能上网。
由于经过了PC的路由器角色转换，虚拟机内的系统已经是PC的一个子网设备，它可以与PC及PC层的其它机器通信，但是PC层的其它机器却无法跟虚拟机内的系统通信。如果将开发板接入路由器，则开发板不能与虚拟机ping通，所以在开发的时候，最好采用桥接模式去联网！

桥接：由于桥接需要得有个路由器，PC机使用有线或者无线连接到能上网的路由器上，将虚拟机内的系统模拟成一台局域网内单独的主机，虚拟机内的系统可以跟整个局域网内的所有设备进行双向通信，如果再将你的开发板接入路由器，那么三者互ping没有任何问题。因此在进行开发的时候，推荐使用桥接联网方式！

> 本次只是尝试联网，使用NAT，桥接并未测试！

#### NAT

在虚拟机中，打开***虚拟机设置***，选择网络适配器，选择NAT模式，或者自定义模式中选择Vmnet8,自己选择的是自定义模式；

![image-20200220133732691](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200220133732691.png)

在Vmware中打开***虚拟机网络编辑器***，进行网络编辑选择VMnet8，即可，虚拟机会自动分配子网IP，由于是NAT模式，虚拟机的上图192.168.179.0网段是分配给虚拟机中的Ubuntu的。这是因为在NAT模式下，PC机充当了一个路由器的角色。它既要跟上层的真实路由器通信，又要跟Ubuntu虚拟机通信。玩过路由器的同学就知道，路由器的上层网段和下层网段是不允许相同的，而我们常用的路由器的网段是192.168.1.0，所以为了避免冲突，软件自己便分配了一个不常用的网段给下层的设备。但也并不保险，如果你的上层路由器网段恰恰是192.168.179.0，那么需要更改这里的网段。


![image-20200220134044744](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200220134044744.png)

设置好这些配置后，发现重启虚拟机仍然连不上网络，这时候还需要配置本地计算机的网络。

打开***网络和共享中心***，选择自己的网络连接状态，自己的是无线网络，如果是有线网络也是一样，点开网络连接状态即可！然后点开***属性***

![image-20200220134423034](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200220134423034.png)

选择共享，勾选，选择VMnet8,如果没有选择，那就只勾选，点击确定！

![image-20200220134656474](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200220134656474.png)

但是自己在第一次尝试的时候，发现确认后出现错误，这个错误大多数都是没有启用window firewall 导致的，因为很多卫士什么的，都会禁用掉，只需要启动即可！

![123](C:\Users\Administrator\Desktop\123.jpg)

在搜索框中输入services.msc

找到windows firewall服务进入，设置启动即可！

上述设置完成后，在去设置本地网络共享，即可重启虚拟机，此时，虚拟机就可以使用NAT联网方式进行上网了！

#### 桥接

桥接的方式也很简单，在虚拟机设置中选择桥接模式：

![20180402151119560](C:\Users\Administrator\Desktop\20180402151119560.png)

打开虚拟网络编辑器

![2018040215113039](C:\Users\Administrator\Desktop\2018040215113039.png)

配置好，即可，同样也要配置本地网络配置，和NAT方式一样！

#### 总结

NAT联网拓扑图

![20180402151105328](C:\Users\Administrator\Desktop\20180402151105328.png)

桥接联网拓扑图：

![2018040215140056](C:\Users\Administrator\Desktop\2018040215140056.png)

所以，桥接方式各个设备间是平等的，可以相互通信，更适合开发！